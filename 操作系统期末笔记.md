---
title: 操作系统期末笔记
date: 2020-01-06 08:48:25
tags: [笔记,操作系统,期末]
categories: [笔记 ]
---
# 第一章 
## 1.1-1.2节
> ### 操作系统的目标
> * 在计算机系统上配置操作系统，其主要目的是**方便性、有效性、可扩充性、和开放性**
> ### 操作系统的主要作用
> * 是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充，主要作用是管理好这些设备，提高他们的利用率和系统的吞吐量，并为用户和应用程序提供一个简单的接口，便于用户使用。
> ### 具体作用如下
> 1. OS作为用户与计算机硬件系统之间的接口
> 2. OS作为计算机系统资源管理的管理者
> 3. OS实现了对计算机资源的抽象
<!--more-->
> ### 操作系统的发展过程
> 1. 未配置操作系统的计算机系统
>    * 人工操作方式、脱机输入输出方式（off-line I/O方式）
>    * 脱机方式的主要优点：**减少了CPU的空闲时间，装带、卸带、以及将数据从低俗I/O设备送到高速磁带上操作，都是在脱机情况下由外围机完成的，并不占用主机时间，从而有效地减少CPU空闲时间。提高了I/O速度。当CPU在运行中需要输入数据时，是直接从高速的磁带上将数据输入到内存中，极大提高了I/O速度.**
> 2. 单道批处理系统
>    * 批处理系统旨提高系统资源利用率和系统吞吐量
>    * 主要缺点为:**系统中的资源得不到充分利用**
> 3. 多道批处理系统
>    * 优缺点:**资源利用率高、系统吞吐量大、平均周转时间长、无交互能力**；
>    * 解决的问题：**处理机争用问题、内存分配和保护问题、I/O设备分配问题、文件的组织和管理问题、文件的组织和管理问题、作业管理问题、用户与系统的接口问题。
> 4. 分时系统
>    * 推动分时系统形成和发展的主要动力，则是为了满足用户对人机交互的需求，表现在人机交互，共享主机两个方面。
> 5. 实时系统
>    * 类型：**工业（武器）控制系统、信息查询系统、多媒体系统、嵌入式系统**
> 6. 单用户单任务操作系统
>    * 最具代表性的CP/M和MS-DOS
> 7. 多用户多任务操作系统
>    * UNIX OS 是美国电报电话公司Bell实验室研发的。


# 第二章 进程的描述与控制
## 2.2-2.3习题
* 静态角度看，进程是由**程序段、数据段、PCB**组成的
* **PCB**是进程的唯一标志
* 进程和程序的本质区别是：**进程为动态、程序为静态**
* 进程的三个基本状态：**挂起、阻塞、就绪**
* 正在等待他人释放临界资源的进程处于**阻塞**状态
* 已分配到除CPU外的所有资源的进程处于**就绪**状态
* 已获得CPU的进程处于**执行状态**
* 某进程所要求的一次打印输出结束，进程状态从**阻塞到就绪**
* 正在执行的进程由于时间片用完被暂停执行，此时，进程应从执行变为**活动阻塞**
* 若进程正处于执行状态，因终端请求而暂停下来，一边研究其运行情况，这是进程应转变**静止就绪**
* **完整的程序代码**不属于PCB的内容
* 在将CPU的状态分为用户态和核心态的系统中，应该在核心态下执行的指令以此为：**屏蔽所有中断、设置时钟、停机**
* 在分时系统中，导致进程创建的典型事件是**用户登录**
* 在批处理系统中，导致进程创建的典型事件为**作业调度**
* 由系统专门为运行中的应用进程创建新进程的时间是**提供服务**
* 在创建进程时，**为进程分配CPU**不是创建所必须的步骤
> * 进程的定义：  
&nbsp;&nbsp;&nbsp;&nbsp;进程是程序的一次执行，进程是一个程序及其数据在处理机上顺序执行时所发生的活动。  
> * 创建状态：  
&nbsp;&nbsp;&nbsp;&nbsp;首先申请一个空白的PCB，并向PCB中填写用于控制和管理进程的信息；然后为该进程分配运行时所必需的资源，最后把该进程转入就绪状态并插入就绪队列中。  
> * 终止状态：  
&nbsp;&nbsp;&nbsp;&nbsp;等待操作系统进行善后处理，最后将PCB清零，将PCB空间返还系统。

## 2.4-2.5习题
* 在生产者-消费者问题中，应设置**互斥信号量mutex、资源信号量full和empty**。mutex的初始值应设置为**1**,full的初始值应设置为**0**,empty的初始值为 **+n**。
* 用信号量S实现对系统中4台打印机的互斥使用，S.value的初始值应当设置为**4**，若S.value当前值为-1，则表示S.L队列中有**1**个等待进程
* 设有10个进程共享一个互斥段。如果最多允许有1个进程进入互斥段，则采用的互斥信号量初始值应为**1**；如果最多允许有3个进程进入互斥段，则采用的的互斥信号量初始值应设为**3**。
## 2.7-2.8习题
* 在引入线程的操作系统中，资源分配和调度基本单位为**进程**，CPU调度和分派的基本单是**线程**
* 当进程由执行状态变为就绪状态时，CPU现场信息必须保存在PCB中
* 信号量的初值不能为负数；线程是CPU调度的基本单位，但不是资源调度的基本单位；管程每次只允许一个进程进入；wait、signal操作可以解决一切互斥问题。
* 在三种基本类型的操作系统中，都设置了**进程调度**
* 在批处理操作系统中，还应设置**作业调度**
* 在多处理机系统中，还应设置**多处理机调度**
## 必会大题
1. 生产者-消费者问题的算法： 
```c
Product(){
    while(1){
        wait(empty);
        wait(mutex);
        buffer(in)=m;
        in=(in+1)%n;
        signal(mutex);
        signal(full);
    }
}
Consumer(){
    while(1){
        wait(full);
        wait(mutex);
        m=buffer(out);
        out=(out+1)%n;
        signal(mutex);
        signal(empty);
    }
}
```
2. 用信号量解决过独木桥问题：同一方向的行人可连续过桥，当某一方向有人过桥时，另一方向的行人必须等待；当某一方向无人过桥时，另一方向的行人可以过桥。  
    * 分析：独木桥问题是读者-写者问题的变形，同一方向的行人可以同时过桥，相当于读者可以同时读，可将两个方向的人看作两类不同的读者，同类读者可以同时读，不同读者只能互斥读。
    * 答：
    ```c
    //定义如下变量：
    int countA = 0 , countB = 0;    //表示两个方向行人数量
    semaphore bridge = 1 ;  //实现互斥，仅一个桥
    semaphore mutexA = mutexB = 1 ; //AB两个方向的互斥
    //A方向的所有行人对应的响应的算法，他们的动作的算法描述：
    PA(){
        wait(mutexA);
        if(countA==0){
            wait(bridge);
            countA++;
        }
        signal(mutexA);
        过桥；
        wait(mutexA);
        countA-;
        if(countA==0){
            signal(bridge);
            signal(mutexA);
        }
    }
    //B方向与A方向类似，只需将mutexA和countA改为mutexB和countB
    ```
> 线程和进程的关系  
> 1. 一个进程可以有多个线程，但至少有一个线程；而一个线程只能在一个进程的地址空间内活动。
> 2. 资源分配给进程，同一个进程的所有线程共享该进程所有资源。
> 3. CPU分配给线程，即真正在处理器运行的是线程。
> 4. 线程在执行过程中需要协作同步，不同进程的线程间要利用消息通信的办法实现同步。

# 第三章 处理机调度与死锁
## 习题
* 在面向用户的调度准则中，**优先权高的作业能获得到优先服务**
* **响应时间快**是选择分时系统中进程调度算法的重要准则
* **平均周转时间短**是批处理系统中选择作业调度的重要准则
* **优先权高的作业能获得优先服务**准则是为了照顾紧急作业用户的要求而设置的
* 作业调度是从处于**后备**状态的队列中选取作业投入运行
* **周转时间**是指作业进入系统到作业完成所经过的时间间隔
* **时间片轮转**算法不适合作业调度
* **FCFS(先来先服务)调度算法**只能采用非抢占调度方式
* **时间片轮转法**只能采用抢占调度方式
* 降低进程优先级的最合理的时机是**进程的时间片用完**
* 在动态优先权中，随着作业时间的增加，其优先权将随之下降
* 若为每个作业建立一个进程，则为照顾短作业用户，应采用**短作业优先**算法；照顾紧急作业用户，应采取**基于优先权的剥夺调度算法**；为实现人机交互作用，采用**时间片轮转法**为兼顾短作业和长时间等待的作业，采用**高响应比优先**；为使短作业、长作业及交互作业用户都比较满意，则采用**多级反馈队列调度算法**；为使作业的平均周期最短，则采用**短作业优先算法**
* 支持多道程序设计的操作系统在运行过程中，不断地选择新进程来实现CPU的共享，但其中**有新进程进入就绪队列**不是引起操作系统选择新进程的直接原因
* EDF(Earliest Deadline First)算法选择**截止时间最早的进程**为下一个执行的进程
* LLF(Least Laxity First)算法选择**松弛度最低的进程**作为下一个执行的进程
* 实时系统中的优先级倒置是指：**高优先级的进程被低优先级的进程延迟或阻塞**
* 产生死锁的两大基本原因是**系统资源不足**和**进程推进顺序不当**
* 系统产生死锁是指**若干进程等待被其他进程所占用而又不可能释放的资源**
* 产生死锁的四个必要条件**互斥条件、请求和保持条件、不可抢占条件、循环等待条件**
* 死锁的预防是通过破坏产生死锁的四个必要条件来实现的，**一次性分配策略**破坏了“请求与保持”条件；**资源有序分配策略**破坏了“循环等待”条件
* 安全状态是没有死锁的状态，非安全状态是有可能死锁的状态
* 死锁预防策略：**资源有序分配**；死锁避免策略：**银行家算法**
## 必会大题
<img src="https://i.jpg.dog/img/c52851f4850a058672621d3994eb2151.png" width = "500" height = "300" div align=1 />
<img src="https://i.jpg.dog/img/63de51fef7777f1b138bef55fe8af73b.png" width = "500" height = "300" div align=2 />
<img src="https://i.jpg.dog/img/b3102ad1305454485e0269d38767f4ad.png" width = "500" height = "300" div align=3 />

## 填空题
* 高级调度又称**作业调度**，主要功能为**按照一定的算法从外存的后备队列中选若干作业进入内存，并为他们创建进程**；低级调度又称**进程调度**，主要功能是**按照一定的算法从就绪队列中选一个进程投入运行**
* 作业调度必须做**接纳多个作业**和**接纳哪些作业**两个决定
* 进程调度的主要任务是**保存CPU现场**、**按某种算法选择一个就绪进程**、**把CPU分配给新进程**，进程调度的方式主要有**抢占调度**、**非抢占调度**
* 在抢占调度方式中，抢占的主要原则主要有：**时间片原则、短作业原则、优先权原则**
* 在设计进程调度的主要任务时，应考虑**引起调度的因素、调度算法选择、就绪队列的组织**
* 为了使作业的平均周转时间最短，应选择**短作业（进程）优先**调度算法；使当前执行的进程总是优先权最高的进程，应选择**立即抢占的高优先权优先**调度算法；分时系统应选择**时间片轮转**调度算法
* 分时系统中，时间片选的太小会造成**系统开销增大**，时间片的大小一般选择为**略大于一次典型的交互所需要的时间**
* 在采用动态优先权时，为避免一个地优先权的进程处于饥饿状态，可以**随着进程等待时间的增加而提高其优先级**，而为了避免一个高优先权的长作业长期垄断CPU，则可以**随着进程运行时间的增加而降低其优先权**
* 高响应比优先调度算法综合考虑作业的**运行时间**和**等待时间**，因此会兼顾到长、短作业
* 死锁产生的主要原因是**竞争资源**和**进程推动顺序非法**
* 死锁产生比必要条件是**互斥条件、请求与保持条件、不剥夺条件、环路等待条件
* 通过破坏死锁产生的四个必要条件可进行思索的预防，其中**互斥**条件一般是不允许破坏的，一次性分配所有资源破坏的是其中的**请求与保持条件**，资源的有序分配破坏的是其中的**环路等待**条件
* 避免死锁，允许进程动态的申请资源，但系统在进行分配时应先计算资源分配的**安全新**，若此次分配不会导致系统进入**不安全状态**，便将资源分配给他，否则便让进程**等待**
* 解决死锁问题的方法有**预防、避免、检测、解除等**，一次性分配所有资源采用的是其中的**预防死锁**方法，银行家算法采用的是**避免死锁**方法
* 根据死锁定理，一个状态为死锁状态的充分条件是当且仅当该状态的资源分配图是**不可完全简化**时
* **撤销进程**和**剥夺资源**是解除死锁的两种常用方法

# 第四章 存储器管理
## 习题
* 静态重定位是在作业的**装入过程**中进行的
* 动态重定位是在作业的**执行过程**中进行的
* 在进程的地址空间中，有一条将第1000单元中的数据装入机损其RI的指令“LOAD RI,1000”，采用动态重定位技术时，装入内存后，**该指令的第二个操作数仍为1000**
* 静态链接是在**装入程序之前**进行的
* 动态链接实在**装入某段程序时**或**调用某段程序时**进行的，在**调用某段程序时**进行链接，可提高内存利用率
* 要保证进程在主存中被改变了位置后仍能正确执行，则对著空间采用**动态重定位**
* 在回收内存时可能出现释放区与插入点前F1相邻接，此时应**以F1分区的表项为新表项，同时修改新表项的大小和起始地址**;释放区与插入点后一分区F2邻接，此时应**以F2分区的表项为新表项，，同时修改新表项的大小和起始地址**；释放区不与F1、F2相邻接，此时应**为会收区建立一个分区表项，填上分区的大小和起始地址**；释放区同时与F1、F2邻接，此时**以F1分区的表项为新表项，但修改新表项的大小且还要删除F2所对应的表项
* 在动态分区式内存管理中，倾向于优先使用低址部分空闲区的算法是**首次适应算法**；能使内存空间中空闲区分布的均匀的算法是**循环首次适应法**；每次分配时，把既能满足要求，有事最小的空闲分区分配给进程的算法是**最佳适应算法**
* 在首次适应算法中，要求空闲分区按**空闲区起始地址递增**的顺序形成空闲分区链
* 在最佳适应算法中，是按**空闲区大小递增**的顺序形成空闲分区链
* 在最坏适应算法中，是按**空闲区大小递减**的顺序形成空闲分区链
* 对外存对换区的管理应以**提高换入换出速度**为主要目标
* 对外存文件区的管理应以**提高存储空间利用率**为主要目标
* 由连续分配方式发展为分页存储管理方式的主要推动力量是**提高内存利用率**；由分页系统为分段系统的主要推动力量是**满足用户需求**；进而发展为段页式系统的主要动力是**既能满足用户需求，又能提高内存利用率**
* 分页系统中，主存分配单位式**物理块**；地址转换工作是由**硬件**完成的
* 在没有块表的情况下，分页系统每访问一次数据，要访问**2**次内存
* 在页式存储管理中，其虚拟地址空间是**一维**的
* 在段式存储管理中，其虚拟地址空间是**二维**的
* 在段页式存储管理系统中，其虚拟地址空间是**二维**的
* 通常情况下，**固定分区**支持多通道程序设计、管理最简单、但存储碎片多；**页式**使内存碎片尽量少，而且使内存使用率最高
* **页式和段页式**存储管理方式，会产生内部碎片
* **动态分区方式和段页式**存储管理方式，会产生外部碎片
## 必会大题
<img src="https://i.jpg.dog/img/ac88ae7666dc70fe21430f95513ebee8.png" width = "600" height = "400" div align=4 />
<img src="https://i.jpg.dog/img/a51f2a3c1e05fe4916988b96adc13f2b.png" width = "600" height = "400" div align=5 />
<img src="https://i.jpg.dog/img/6189ac090dad412e3d30adba23466d2c.png" width = "600" height = "400" div align=6 />
<img src="https://i.jpg.dog/img/fde8d679cb86d5c4778aa30b94e20bf2.png" width = "600" height = "400" div align=7 />

> ## 本章知识点总结
> ## 分页存储管理方式
> * 在该方式中，将用户程序的地址空间分为若干个固定大小的区域，称为“页”或者“页面”。典型的页面大小为1KB.相应的，也将内存空间分为若干物理块或页框，页和块的大小相同。这样可将用户程序的任一页放入任一物理块中，实现了离散分配。
> ## 分段存储管理方式
> * 这是为了满足用户要求而形成的一种存储管理方式。
> * 他把用户程序的地址空间分为若干大小不同的段，每段可定义一组相对完整的信息。在存储器分配时，以段为单位，这些段在内存中可以不相互邻接，所以也同样实现了离散分配。
> ## 段页式存储管理方式
> * 这是分页和分段两种存储管理方式相结合的产物。他同时也具备两者的优点，是目前应用最广泛的一种存储管理方式。
> ## 分页和分段的主要区别
> 1. 页是信息的物理单位
> 2. 页的大小固定且由系统决定
> 3. 分页的用户程序地址空间是一维的

# 第五章 虚拟存储器
## 习题
* 要求作业在运行之前，必须全部装入内存，且在运行过程中也必须一直驻留内存
* 虚拟存储器管理系统的基础是程序的局部性理论。此理论的基本含义是**程序执行时对主存的访问是不均匀的**；局部性理论有两种表现形式，**时间局部性**和**空间局部性**
* 时间局部性的意义在于**最近被访问的单元，很可能在不久的将来还要被访问**
* 空间局部性的意义在于**最近被访问的单元，很可能塔附近的单元也即将被访问**
* 虚拟存储器最基本的特征是**多次性**
* 多次性特征主要基于**局部性原理**
* 实现虚拟存储器的目的是**扩充主存容量**
* 在请求调页系统中有着多种置换算法，选择最先进入内存的页面予以淘汰的算法称为**FIFO算法**；选择以后不再使用的页面予以淘汰的算法称为**OPT算法**；选择自上次访问以来经历时间最长的页面予以淘汰的算法称为**LRU算法**；选择自某时刻开始以来，访问次数最少的页面予以淘汰的算法称为**LFU算法**
* 系统抖动是指**被调出的页面又立刻需要被调入所形成的频繁调入调出现象**
* 抖动产生原因只要是**置换算法选择不当**
* 测得某个请求调页的计算机系统部分状态数据为：CPU利用率20%，用于对换空间的硬盘利用率97.7%，其他设备的利用率5%。由此断定系统出现异常。此种情况，**减少运行的进程数**和**安装一个更快的硬盘**能提高CPU的利用率
* <img src="https://i.jpg.dog/img/0eb72021f1062344c6b191702bd43b71.png" width = "600" height = "400" div align=8 />